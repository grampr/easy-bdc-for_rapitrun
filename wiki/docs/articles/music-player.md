---
slug: music-player
title: ボイスで音を流すミニプレイヤー
subtitle: Tutorial 5
description: EDBB のボイス/音声ブロックで VC に参加・再生・切断するシンプルな音楽 Bot を作る。Token を差し替えて走らせるだけ。
updated: 2025-12-02
tags: [voice, audio, commands]
accent: amber
order: 5
---

# Tutorial 5: ボイスで音を流すミニプレイヤー

VC に音を流すと「Bot 作った感」が一気に出ます。EDBB のボイス系ブロックを使って、固定の音源を再生するミニプレイヤーを組みます（引数付きの URL 再生は未実装なのでパスはブロックに直書きします）。

## ゴール

- `!play` で実行者の VC に入り、指定した音源を流す
- `!stop` で再生を止めて VC から抜ける
- FFmpeg を入れた環境ならそのまま動く

## Step 1: 再生コマンドを作る

1. 「🗣️ プレフィックスコマンド」を `!play` に設定。  
2. 中に「🔊 実行者のボイスチャンネルに参加」を置く（ユーザーが VC にいれば参加します）。  
3. 続けて「🔊 音楽ファイルを再生」を繋ぎ、パス欄に `music/sample.mp3` のようなローカルパスや FFmpeg が読める URL を直書き。  
4. ついでに「↩️ 返信する」で「再生するよ！」と返しておくと動作確認しやすいです。

## Step 2: 停止コマンドを作る

1. もうひとつ「🗣️ プレフィックスコマンド」を `!stop` で作成。  
2. 中に「🔇 ボイスチャンネルから切断」を置き、最後に「↩️ 返信する」で「止めました」と返す。

## 必要な準備

- 生成コードを動かすマシンに FFmpeg をインストールし、`ffmpeg -version` が通るよう PATH を設定。  
- `pip install -U "discord.py[voice]"` を済ませ、コード末尾の `bot.run('TOKEN')` を Bot Token で置き換えてから `python bot.py` を実行。  
- Bot に VC の「接続」「発言」権限があるか、Developer Portal でも Voice Intents をオンにしているか確認。

## うまくいかないとき

- 再生されない → ユーザーが VC に入っているか、ファイルパス/URL が正しいか、FFmpeg が入っているかを確認。  
- 音が途切れる → 別リージョンの VC で試すか、音量を下げてみる（生成コード内で `volume` を調整可能）。  
- Slash コマンドで使いたい → `⚡ スラッシュコマンド` ブロックでも同じ並びで組めます。引数による曲指定は未実装なので固定パス運用になります。
