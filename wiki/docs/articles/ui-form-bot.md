---
slug: ui-form-bot
title: ボタン・モーダル付きフォーム Bot
subtitle: Tutorial 3
description: Embed で案内し、ボタンを押すとモーダルで入力を集め、結果をまとめて返信する UI 付き Bot の作り方。
updated: 2025-12-02
tags: [button, modal, embed]
accent: purple
order: 3
---

# Tutorial 3: ボタン・モーダル付きフォーム

ボタンを押すとモーダルで入力を集め、Embed でまとめる問い合わせ/アンケート用の構成例です。

## 使用する主なブロック

- ⚡ スラッシュコマンド（例: `/contact`）
- ✨ 新しい埋め込み(Embed)作成 + 項目追加
- ボタン表示 (`send_button_message`)
- モーダル表示 (`show_modal`) / モーダル送信イベント (`on_modal_submit`)
- 返信/編集 (`reply_message` / `edit_reply`)

## 組み立て手順

1. **コマンド入口**: `/contact` を作成し、最初に「応答を保留」を置いて待機表示。
2. **案内 Embed**: Embed を作り、タイトル「お問い合わせ」、説明に注意事項を入れて返信。
3. **ボタン追加**: 「ボタン付きメッセージを送信」で `label="入力する"`, `custom_id="contact_open"` を設定。
4. **ボタンイベント**: `custom_id=contact_open` のイベントを置き、「モーダルを表示」を接続。タイトル「お問い合わせ」、フィールド 1=「お名前」、フィールド 2=「内容」など。
5. **モーダル送信イベント**: `custom_id=contact_open` の送信イベントを置き、`get_input_value 0/1` で入力を取得。
6. **結果をまとめる**: 新規 Embed を作り、フィールドに「名前」「内容」を追加して返信/編集する。

> ポイント: 同じ `custom_id` をボタンとモーダルイベントで揃える。入力を他人に見せないなら「返信を自分だけに表示」をオン。回答をログに残したい場合は「チャンネル ID に送信」を追加。

## 権限と動作チェック

- Bot に「メッセージ送信」「埋め込みリンク」「ボタン/モーダル」用のアプリコマンド権限があるか確認。
- テストは Guild 限定スラッシュコマンドで行うと反映が早い。
- モーダルの入力は 4000 文字まで。長文は添付リンクで対応すると安定。
