---
slug: ui-form-bot
title: ボタンとモーダルで作るお問い合わせフロー
subtitle: Tutorial 3
description: EDBB のボタン / モーダルブロックで簡易フォームを作る手順。custom_id を合わせて、入力内容を Embed にまとめて返します。
updated: 2025-12-02
tags: [button, modal, embed]
accent: purple
order: 3
---

# Tutorial 3: ボタンとモーダルで作るお問い合わせフロー

Slash コマンドだけでは味気ないので、ボタンを押すとモーダルが開く「問い合わせフォームっぽい」流れをブロックで組みます。custom_id を揃えるのがコツです。

## ゴール

- `/contact` を実行するとボタン付きメッセージが出る
- ボタンを押すとモーダルが開き、2 つの入力欄を受け付ける
- モーダル送信後に入力内容を Embed で返信する

## Step 1: /contact でボタンを出す

1. 「⚡ スラッシュコマンド /」に `contact` を指定。  
2. 中に「🔘 ボタン付きメッセージ送信」を繋ぎ、メッセージを案内文にする。  
   - ボタン名: `お問い合わせを送る` など  
   - ボタンID: `contact_open` のように一意な名前に

※ このブロックはテキストのみ送れる仕様です。Embed を一緒に出したい場合は、先に「↩️ 返信する」で Embed を返してから、別メッセージとしてボタンを送る形にすると安全です（Interaction の 1 回目の応答をボタンに使うと失敗しません）。

## Step 2: ボタンを拾ってモーダルを開く

1. 「🖱️ ボタンがクリックされたとき」を置き、ボタンID を `contact_open` に合わせる。  
2. 中に「📝 モーダル(入力フォーム)を表示」を繋ぐ。  
   - タイトル: `お問い合わせ`  
   - モーダルID: `contact_modal`（ボタン ID と被らないように）  
   - 入力欄1: `お名前`  
   - 入力欄2: `お問い合わせ内容`

## Step 3: モーダル送信を処理する

1. 「📝 モーダルの送信を受け取ったとき」を追加し、モーダルID を `contact_modal` に。  
2. 中で「✨ 新しい埋め込み(Embed)作成」を使い、以下のように組む:
   - 「設定：タイトル」→ `受け付けました`
   - 「設定：説明文」→ `お問い合わせありがとうございます！` など
   - 「項目名/内容を追加」×2 を繋ぎ、値に `入力欄の値 0` と `入力欄の値 1` を挿して「お名前」「内容」をセット
3. Embed ブロックを「↩️ 返信する」に差し込み、必要なら「自分だけに表示」をオンにして返す。

## ハマりがちなところ

- custom_id のつけ忘れ・書き間違いでイベントが発火しないことが多いので、`contact_open` / `contact_modal` など接頭辞で揃えると安心。
- ボタン付きメッセージは Interaction の最初の応答で使う必要があります。先に別の返信をしている場合はフォローアップ送信に切り替えるため、ボタンを最初に送る構成がおすすめ。
- モーダル送信後に何も返さないと「応答がありません」になるので、必ず「↩️ 返信する」を入れてください。

ここまでで UI 付きのやり取りが完成です。次はモデレーション用のログや Kick/BAN を組み合わせてみます。
